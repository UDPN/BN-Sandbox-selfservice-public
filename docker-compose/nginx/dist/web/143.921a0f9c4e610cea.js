"use strict";(self.webpackChunkudpn_b=self.webpackChunkudpn_b||[]).push([[143],{143:(w,u,e)=>{e.r(u),e.d(u,{AccountUploadModule:()=>X});var g=e(9808),r=e(3075),C=e(88),p=e(4521),t=e(5e3);let m=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-account-upload"]],decls:1,vars:0,template:function(o,s){1&o&&t._UZ(0,"router-outlet")},directives:[p.lC],encapsulation:2}),n})();var T=e(8306),U=e(8746),x=e(9727),f=e(520),L=e(4004);let M=(()=>{class n{}return n.list="vn/v1/udpn/did/manage/didContract/storeDidDocumentOnChain",n})(),y=(()=>{class n{constructor(o){this.http=o}search(o){return this.http.post(M.list,{didDocumentStr:o.didDocumentStr||""}).pipe((0,L.U)(l=>l))}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(f.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=e(1758),v=e(1945),J=e(5052),O=e(6042),S=e(2643),F=e(2683),b=e(647),D=e(5737),N=e(685),z=e(1047),I=e(3478);function _(n,i){1&n&&(t.TgZ(0,"div",11),t._uU(1,"Create DID"),t.qZA())}function P(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"nz-empty"),t.qZA())}const Q=function(){return{minRows:3,maxRows:25}};function R(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"textarea",13),t.NdJ("ngModelChange",function(l){return t.CHM(o),t.oxw(2).inputValue=l}),t.qZA(),t.TgZ(2,"button",14),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).handleUpload()}),t._uU(3),t.qZA(),t.qZA()}if(2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("disabled",!0)("nzAutosize",t.DdM(7,Q))("ngModel",o.inputValue),t.xp6(1),t.Q6J("nzType","primary")("nzLoading",o.uploading)("disabled",0===o.fileList.length),t.xp6(1),t.hij(" ",o.uploading?"loading":"Create"," ")}}function Y(n,i){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"nz-divider",12),t.TgZ(2,"div"),t.YNc(3,P,2,0,"div",9),t.YNc(4,R,4,8,"div",9),t.qZA(),t.qZA()),2&n){const o=t.oxw();t.xp6(3),t.Q6J("ngIf",!o.upstatus),t.xp6(1),t.Q6J("ngIf",o.upstatus)}}function j(n,i){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"nz-result",15),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("nzTitle",o.didName+" has been uploaded successfully.")}}let Z=(()=>{class n{constructor(o,s,l){this.msg=o,this.http=s,this.accountUploadService=l,this.upstatus=!1,this.uploading=!1,this.isSuccess=!1,this.fileList=[],this.beforeUpload=d=>{if(this.fileList=this.fileList.concat(d),this.didName=this.fileList[0].name,this.fileList.length>0&&(this.upstatus=!this.upstatus),"text/plain"!==this.fileList[0].type){this.msg.error("File format error!");for(let a=0;a<=this.fileList.length;a++)this.fileList.splice(0,a);this.upstatus=!this.upstatus}return new Promise((a,A)=>{const c=new FileReader;c.onload=()=>{c.result&&a(c.result.toString())},c.readAsText(d,"utf-8")}).then(a=>{var A=JSON.parse(a),c=JSON.stringify(A,void 0,4);this.inputValue=c}),!1},this.handleRemove=d=>new T.y(H=>{for(let a=0;a<=this.fileList.length;a++)this.fileList.splice(0,a);this.upstatus=!this.upstatus,location.reload()})}ngOnInit(){}handleUpload(){this.uploading=!0,this.accountUploadService.search({didDocumentStr:this.inputValue}).pipe((0,U.x)(()=>this.uploading=!1)).subscribe(o=>{0===o.code&&(this.isSuccess=!0)})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(x.dD),t.Y36(f.eN),t.Y36(y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:21,vars:7,consts:[[1,"ctx-titles"],[1,"font-semibold"],[1,"upload","inner-content"],[1,"upload-content"],[1,"",3,"nzTitle"],[3,"nzFileList","nzBeforeUpload","nzRemove","nzFileListChange"],["nz-button","","nzType","primary",3,"disabled"],["nz-icon","","nzType","upload"],["title",""],[4,"ngIf"],["src","../../../../assets/images/API (1).png","alt","",1,"w-14"],[1,"upload-title"],["nzText","Upload to UDPN network"],["nz-input","",3,"disabled","nzAutosize","ngModel","ngModelChange"],["nz-button","",2,"margin-top","16px",3,"nzType","nzLoading","disabled","click"],["nzStatus","success",3,"nzTitle"]],template:function(o,s){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.TgZ(2,"nz-breadcrumb"),t.TgZ(3,"nz-breadcrumb-item"),t._uU(4,"Account Management"),t.qZA(),t.TgZ(5,"nz-breadcrumb-item",1),t._uU(6,"DID Upload"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",2),t.TgZ(8,"div",3),t.TgZ(9,"nz-page-header",4),t.TgZ(10,"nz-page-header-extra"),t.TgZ(11,"nz-upload",5),t.NdJ("nzFileListChange",function(d){return s.fileList=d}),t.TgZ(12,"button",6),t._UZ(13,"i",7),t._uU(14," Choose DID document "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,_,2,0,"ng-template",null,8,t.W1O),t.YNc(17,Y,5,2,"div",9),t.YNc(18,j,2,1,"div",9),t.qZA(),t.TgZ(19,"div"),t._UZ(20,"img",10),t.qZA(),t.qZA(),t.qZA()),2&o){const l=t.MAs(16);t.xp6(9),t.Q6J("nzTitle",l),t.xp6(2),t.Q6J("nzFileList",s.fileList)("nzBeforeUpload",s.beforeUpload)("nzRemove",s.handleRemove),t.xp6(1),t.Q6J("disabled",s.upstatus),t.xp6(5),t.Q6J("ngIf",!s.isSuccess),t.xp6(1),t.Q6J("ngIf",s.isSuccess)}},directives:[h.Dg,h.MO,v.$O,v.Jp,J.FY,O.ix,S.dQ,F.w,b.Ls,g.O5,D.g,N.p9,z.Zp,z.rh,r.Fj,r.JJ,r.On,I.ml],styles:[".inner-content[_ngcontent-%COMP%]{padding:24px;background:#fff;height:100%}.title-color[_ngcontent-%COMP%]{margin-left:5px;color:#3c5686}.upload[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:80px}.upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:10px;margin-top:40px}.upload-content[_ngcontent-%COMP%]{width:85%}.upload-title[_ngcontent-%COMP%]{font-size:1rem}.upload-img[_ngcontent-%COMP%]{margin-left:50px}"]}),n})();const B=[{path:"",component:m,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Z}]}];let V=(()=>{class n{}return n.more=[m,Z],n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(B)],p.Bz]}),n})(),X=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,V,r.u5,r.UX,C.m]]}),n})()}}]);