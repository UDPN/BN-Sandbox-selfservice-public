"use strict";(self.webpackChunkudpn_b=self.webpackChunkudpn_b||[]).push([[896],{4896:(vn,b,s)=>{s.r(b),s.d(b,{TransactionSwapModule:()=>yn});var p=s(9808),c=s(3075),D=s(88),g=s(4521),L=s(2805),A=s(8746),I=s(8231),n=s(5e3),z=s(3640),Z=s(112),Q=s(9590),d=s(4546),m=s(1894),y=s(2683),h=s(1047),v=s(6042),S=s(2643),C=s(647),_=s(8144);function w(e,o){1&e&&n._UZ(0,"nz-spin",14)}function Y(e,o){if(1&e&&n._UZ(0,"div",15),2&e){const t=n.oxw();n.Q6J("innerHTML",t.codes,n.oJD)}}function P(e,o){1&e&&n._UZ(0,"nz-spin",14)}function $(e,o){if(1&e&&(n.TgZ(0,"div",17),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.Oqu(t.singVal)}}function E(e,o){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,P,1,0,"nz-spin",1),n.YNc(2,$,2,1,"div",16),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.singSecStatus),n.xp6(1),n.Q6J("ngIf",!t.singSecStatus)}}function V(e,o){1&e&&(n.ynx(0),n._uU(1,"Please input your Private key!"),n.BQk())}function j(e,o){1&e&&(n.ynx(0),n._uU(1,"Please enter a 64 bit hexadecimal secret key and the letters only contain A(a)-F(f)!"),n.BQk())}function R(e,o){if(1&e&&(n.YNc(0,V,2,0,"ng-container",18),n.YNc(1,j,2,0,"ng-container",18)),2&e){const t=o.$implicit;n.Q6J("ngIf",t.hasError("required")),n.xp6(1),n.Q6J("ngIf",t.hasError("regular"))}}function H(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){return n.CHM(t),n.oxw().onSubmit()}),n._uU(1,"Sign and Submit"),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("nzLoading",t.isLoadingOne)("disabled",!t.validateForm.valid||!0===t.singStatus)}}function K(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"button",20),n.NdJ("click",function(){return n.CHM(t),n.oxw().destroyModal()}),n._uU(1,"Cancel"),n.qZA()}}let x=(()=>{class e{constructor(t,i,a,r,l){this.router=t,this.modalService=i,this.modal=a,this.fb=r,this.transactionSwapService=l,this.load=!1,this.singStatus=!1,this.singStatusz=!1,this.isLoadingOne=!1,this.tnSecuryMsg="",this.oldTnSecuryMsg="",this.codes="",this.codesz="",this.singSec=!1,this.singSecStatus=!1,this.subButtonStatus=!1,this.singVal="",this.keyType=!1,this.keyValidator=u=>u.value?/^[0][x][0-9a-fA-F]{64}$/.test(u.value)?{}:{regular:!0,error:!0}:{error:!0,required:!0}}ngOnInit(){this.getSigmMsg(),this.validateForm=this.fb.group({key:["",[c.kI.required,this.keyValidator]]})}getSigmMsg(){this.load=!1,this.codes=`\n    <div class="code">{</div>\n    <div class="u-margin-l-20 my-ss" style="background: aqua;">"message":\n    \x3c!--<b>{"gas":"${String(this.info.totalAmount).replace(/\d{1,3}(?=(\d{3})+(\.|$))/gy,"$&,")}","from":"${this.info.fromAcc}","to":"${this.info.toAcc}","value":"${String(this.info.toAmount).replace(/\d{1,3}(?=(\d{3})+(\.|$))/gy,"$&,")}","nonce":"0","gasPrice":"200"}",</b>,--\x3e\n    </div>\n    <div class="u-margin-l-20">"Source TN Code": "${this.info.nodeNumber}",</div>\n    <div class="u-margin-l-20">"Amount": "${String(this.info.transCurrentAmt).replace(/\d{1,3}(?=(\d{3})+(\.|$))/gy,"$&,")}",</div>\n    <div class="u-margin-l-20">"serviceFee": ${String(this.info.serviceFee).replace(/\d{1,3}(?=(\d{3})+(\.|$))/gy,"$&,")},</div>\n    <div class="u-margin-l-20">"Rate": ${String(this.info.fxRate).replace(/\d{1,3}(?=(\d{3})+(\.|$))/gy,"$&,")},</div>\n    <div class="u-margin-l-20">"sourceAccountAddress": "${this.form.senderAccount}",</div>\n    <div class="u-margin-l-20">"sourceCurrencyType": "${this.form.blockChain[0]}/${this.form.blockChain[1]}",</div>\n    <div class="u-margin-l-20">"TotalAmount": ${String(this.info.totalAmount).replace(/\d{1,3}(?=(\d{3})+(\.|$))/gy,"$&,")},</div>\n    <div class="u-margin-l-20">"target TN Code": ${this.info.targetTnCode},</div>\n    <div class="u-margin-l-20">"targetAccountAddress": "${this.form.beneficiaryAccount}",</div>\n    <div class="u-margin-l-20">"targetCurrencyType": "${this.info.toCurrencyType}/${this.info.toPlatformType}",</div>\n    <div class="u-margin-l-20">"userDid": "${this.form.senderDid}"</div>\n    <div class="u-margin-l-20">"IsKYC": "${1===this.info.isKycRequest?"Yes":"No"}"</div>\n  <div>}</div>\n    `}onSinge(){this.singSec=!0,this.singSecStatus=!0,this.singVal=I.DS.encode(this.randomString(32)),(0,L.H)(1e3).subscribe(i=>{this.singSecStatus=!1,this.subButtonStatus=!0})}destroyModal(){this.modal.destroy()}submitForm(){console.log(this.info),this.singStatus=!0,this.singStatusz=!0;const t={privateKey:this.validateForm.get("key").value,serviceFee:this.info.serviceFee,sourceAccountAddress:this.info.fromAcc,transAmount:this.info.transCurrentAmt,originalTnCode:this.info.originalTnCode,isSwap:!0,targetAccountAddress:this.info.toAcc};this.transactionSwapService.getPermit(t).pipe((0,A.x)(()=>this.singStatus=!1)).subscribe(i=>{0===i.code&&(this.tnSecuryMsg=i.data.permitHash,this.onSubmit())})}onSubmit(){this.confirmModal=this.modalService.confirm({nzTitle:"Submit",nzContent:"Are you sure to submit?",nzOnOk:t=>{this.isLoadingOne=!0;const i={privateKey:this.validateForm.get("key").value,serviceFee:this.info.serviceFee,sourceAccountAddress:this.info.fromAcc,transAmount:this.info.transCurrentAmt,originalTnCode:this.info.originalTnCode,swap:!0,targetAccountAddress:this.info.toAcc};this.transactionSwapService.getPermit(i).subscribe(a=>{0===a.code&&(this.tnSecuryMsg=a.data.permitHash,this.transactionSwapService.deal({toPlatformType:this.info.toPlatformType,fromPlatformType:this.info.formPlatformType,did:this.info.did,fromCurrencyType:this.info.fromCurrencyType,fxRate:this.info.fxRate,key:this.info.key,originalTnCode:this.info.originalTnCode,serviceFee:this.info.serviceFee,vnServiceFee:this.info.vnServiceFee,originalTnServiceFee:this.info.originalTnServiceFee,targetTnServiceFee:this.info.targetTnServiceFee,sourceAccountAddress:this.info.fromAcc,swapAmount:this.info.transCurrentAmt,targetAccountAddress:this.info.toAcc,tnSecuryMsg:this.tnSecuryMsg,toCurrencyType:this.info.toCurrencyType,targetTnCode:this.info.targetTnCode,toAmount:this.info.toAmount,totalAmount:this.info.totalAmount,beneficiaryName:this.info.beneficiaryName,beneficiaryType:this.info.beneficiaryType,fromBankAccount:this.info.fromBankAccount,toBankAccount:this.info.toBankAccount}).pipe((0,A.x)(()=>this.isLoadingOne=!1)).subscribe(l=>{0===l.code&&(this.destroyModal(),this.modalService.success({nzTitle:"success",nzContent:`<p nz-typography nzCopyable nzCopyText="${l.data}">The transaction key is:<br> ${l.data}</p>`}).afterClose.subscribe(u=>{this.router.navigate(["/sandBox/transaction/swap/list"])}))}))})}})}randomString(t){for(var i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="",r=t;r>0;--r)a+=i[Math.floor(Math.random()*i.length)];return a}plaintext(){this.keyType=!this.keyType}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(g.F0),n.Y36(z.Sf),n.Y36(z.Lf),n.Y36(c.qu),n.Y36(Z.e))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-signature"]],inputs:{info:"info",form:"form"},decls:23,vars:6,consts:[[1,"code"],["nzSimple","",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","code",4,"ngIf"],["nz-form","",3,"formGroup"],[3,"nzErrorTip"],["nzPrefixIcon","lock"],["formControlName","key","nz-input","","placeholder","Private Key",3,"type"],["keyErrorTpl",""],["nz-button","",1,"border-0"],["nz-icon","","nzType","eye","nzTheme","outline",3,"click"],[1,"text-red-700"],["nz-button","","nzType","primary","type","button",3,"nzLoading","disabled","click",4,"nzSpaceItem"],["nz-button","","nzType","default","type","button",3,"click",4,"nzSpaceItem"],["nzSimple",""],[3,"innerHTML"],["class","font-bold",4,"ngIf"],[1,"font-bold"],[4,"ngIf"],["nz-button","","nzType","primary","type","button",3,"nzLoading","disabled","click"],["nz-button","","nzType","default","type","button",3,"click"]],template:function(t,i){if(1&t&&(n.TgZ(0,"div"),n.TgZ(1,"div",0),n.YNc(2,w,1,0,"nz-spin",1),n.YNc(3,Y,1,1,"div",2),n.qZA(),n.YNc(4,E,3,2,"div",3),n.TgZ(5,"form",4),n.TgZ(6,"nz-form-item"),n.TgZ(7,"nz-form-control",5),n.TgZ(8,"nz-input-group",6),n._UZ(9,"input",7),n.YNc(10,R,2,2,"ng-template",null,8,n.W1O),n.TgZ(12,"button",9),n.TgZ(13,"i",10),n.NdJ("click",function(){return i.plaintext()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"nz-form-item"),n.TgZ(15,"div",11),n.TgZ(16,"p"),n._uU(17," Note: UDPN sandbox connects to public chain test network only, hence please use private key of TEST account to sign the transaction and DO NOT use real private key here. "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"nz-form-item"),n.TgZ(19,"nz-form-control"),n.TgZ(20,"nz-space"),n.YNc(21,H,2,2,"button",12),n.YNc(22,K,2,0,"button",13),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t){const a=n.MAs(11);n.xp6(2),n.Q6J("ngIf",i.load),n.xp6(1),n.Q6J("ngIf",!i.load),n.xp6(1),n.Q6J("ngIf",i.singSec),n.xp6(1),n.Q6J("formGroup",i.validateForm),n.xp6(2),n.Q6J("nzErrorTip",a),n.xp6(2),n.Q6J("type",!1===i.keyType?"password":"")}},directives:[p.O5,Q.W,c._Y,c.JL,d.Lr,c.sg,m.SK,d.Nx,m.t3,d.Fd,y.w,h.gB,c.Fj,h.Zp,c.JJ,c.u,v.ix,S.dQ,C.Ls,_.NU,_.$1],styles:[".code[_ngcontent-%COMP%]{background:rgba(0,0,0,.05);border-radius:4px;padding:30px 50px;margin:20px 0}"]}),e})();var T=s(1758),q=s(7484),f=s(939),X=s(5737),k=s(3098),G=s(8404);function W(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.ALo(7,"thousandSeparator"),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.ALo(10,"thousandSeparator"),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"thousandSeparator"),n.qZA(),n.TgZ(14,"td"),n._uU(15),n.ALo(16,"thousandSeparator"),n.qZA(),n.TgZ(17,"td"),n._uU(18),n.qZA(),n.TgZ(19,"td"),n._uU(20),n.qZA(),n.TgZ(21,"td"),n._uU(22),n.qZA(),n.TgZ(23,"td"),n.TgZ(24,"a",11),n.NdJ("click",function(){const r=n.CHM(t).$implicit;return n.oxw(2).onSignture(r)}),n._uU(25,"simulate signing(end-user)"),n.qZA(),n._UZ(26,"nz-divider",12),n.TgZ(27,"a",11),n.NdJ("click",function(){const r=n.CHM(t).$implicit;return n.oxw(2).onDetail(r)}),n._uU(28,"Detail"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const t=o.$implicit;n.xp6(2),n.Oqu(t.nodeName),n.xp6(2),n.Oqu(t.fromSpliceCurrencyType),n.xp6(2),n.Oqu(n.lcZ(7,9,t.transCurrentAmt)),n.xp6(3),n.Oqu(n.lcZ(10,11,t.fxRate)),n.xp6(3),n.Oqu(n.lcZ(13,13,t.serviceFee)),n.xp6(3),n.Oqu(n.lcZ(16,15,t.totalAmount)),n.xp6(3),n.Oqu(t.targetTnName),n.xp6(2),n.Oqu(t.toSpliceCurrencyType),n.xp6(2),n.Oqu(1===t.isKycRequest?"Yes":"No")}}function nn(e,o){if(1&e&&(n.ynx(0),n.TgZ(1,"nz-card",6),n.TgZ(2,"div",7),n.TgZ(3,"nz-table",8,9),n.TgZ(5,"thead"),n.TgZ(6,"tr"),n.TgZ(7,"th"),n._uU(8,"Source TN Name"),n.qZA(),n.TgZ(9,"th"),n._uU(10,"Source Currency"),n.qZA(),n.TgZ(11,"th"),n._uU(12,"Amount"),n.qZA(),n.TgZ(13,"th"),n._uU(14,"Rate"),n.qZA(),n.TgZ(15,"th"),n._uU(16,"Service Fee"),n.qZA(),n.TgZ(17,"th"),n._uU(18,"Total Amount"),n.qZA(),n.TgZ(19,"th"),n._uU(20,"Target TN Name"),n.qZA(),n.TgZ(21,"th"),n._uU(22,"Target Currency"),n.qZA(),n.TgZ(23,"th"),n._uU(24,"IsKYC"),n.qZA(),n.TgZ(25,"th"),n._uU(26,"Action"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(27,"tbody"),n.YNc(28,W,29,17,"tr",10),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&e){const t=n.MAs(4),i=n.oxw(),a=n.MAs(15);n.xp6(1),n.Q6J("nzBordered",!1)("nzExtra",a),n.xp6(2),n.Q6J("nzData",i.listOfData)("nzLoading",i.isLoading),n.xp6(25),n.Q6J("ngForOf",t.data)}}function tn(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",13),n.TgZ(2,"div",14),n.TgZ(3,"nz-descriptions",15),n.TgZ(4,"nz-descriptions-item",16),n._uU(5),n.qZA(),n.TgZ(6,"nz-descriptions-item",17),n._uU(7),n.qZA(),n.TgZ(8,"nz-descriptions-item",18),n._uU(9),n.qZA(),n.TgZ(10,"nz-descriptions-item",19),n._uU(11),n.qZA(),n.TgZ(12,"nz-descriptions-item",20),n._uU(13),n.ALo(14,"thousandSeparator"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div",14),n.TgZ(16,"nz-descriptions",21),n.TgZ(17,"nz-descriptions-item",22),n._uU(18),n.qZA(),n.TgZ(19,"nz-descriptions-item",23),n._uU(20),n.qZA(),n.TgZ(21,"nz-descriptions-item",24),n._uU(22),n.qZA(),n.TgZ(23,"nz-descriptions-item",16),n._uU(24),n.qZA(),n.TgZ(25,"nz-descriptions-item",25),n._uU(26),n.qZA(),n.TgZ(27,"nz-descriptions-item",26),n._uU(28),n.ALo(29,"thousandSeparator"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(30,"nz-descriptions",27),n.TgZ(31,"nz-descriptions-item",28),n._uU(32),n.qZA(),n.TgZ(33,"nz-descriptions-item",29),n._uU(34),n.qZA(),n.TgZ(35,"nz-descriptions-item",30),n._uU(36),n.qZA(),n.TgZ(37,"nz-descriptions-item",31),n._uU(38),n.qZA(),n.TgZ(39,"nz-descriptions-item",32),n._uU(40),n.ALo(41,"thousandSeparator"),n.qZA(),n.TgZ(42,"nz-descriptions-item",33),n._uU(43),n.ALo(44,"thousandSeparator"),n.qZA(),n.TgZ(45,"nz-descriptions-item",34),n._uU(46),n.ALo(47,"thousandSeparator"),n.qZA(),n.TgZ(48,"nz-descriptions-item",35),n._uU(49),n.ALo(50,"thousandSeparator"),n.qZA(),n.TgZ(51,"nz-descriptions-item",36),n._uU(52),n.qZA(),n.qZA(),n.TgZ(53,"div",37),n.TgZ(54,"button",38),n.NdJ("click",function(){return n.CHM(t),n.oxw().onBack()}),n._uU(55,"Back"),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("nzGutter",24),n.xp6(1),n.Q6J("nzSpan",12),n.xp6(2),n.Q6J("nzSpan",3),n.xp6(1),n.hij("",t.infoData.fromBankAccount," "),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.Oqu(t.infoData.did),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.hij("",t.infoData.fromSpliceCurrencyType," "),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.hij("",t.infoData.fromAcc," "),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.AsE("",n.lcZ(14,39,t.infoData.transCurrentAmt)," ",t.infoData.fromSpliceCurrencyType.split("-")[0],""),n.xp6(2),n.Q6J("nzSpan",12),n.xp6(2),n.Q6J("nzSpan",3),n.xp6(1),n.hij("",1===t.infoData.beneficiaryType?"Internal Bank Beneficiary":"External Beneficiary"," "),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.hij("",t.infoData.toSpliceCurrencyType," "),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.hij("",t.infoData.beneficiaryName," "),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.hij("",t.infoData.toBankAccount," "),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.hij("",t.infoData.toAcc," "),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.AsE("",n.lcZ(29,41,t.infoData.toAmount)," ",t.infoData.toSpliceCurrencyType.split("-")[0],""),n.xp6(2),n.Q6J("nzColumn",2),n.xp6(2),n.Oqu(t.infoData.nodeName),n.xp6(2),n.hij("",t.infoData.nodeNumber," "),n.xp6(2),n.Oqu(t.infoData.targetTnName),n.xp6(2),n.hij("",t.infoData.targetTnCode," "),n.xp6(2),n.Oqu(n.lcZ(41,43,t.infoData.fxRate)),n.xp6(3),n.hij("",n.lcZ(44,45,"0")," "),n.xp6(3),n.AsE("",n.lcZ(47,47,t.infoData.serviceFee)," ",t.infoData.fromSpliceCurrencyType.split("-")[0]," "),n.xp6(3),n.AsE("",n.lcZ(50,49,t.infoData.totalAmount)," ",t.infoData.fromSpliceCurrencyType.split("-")[0]," "),n.xp6(3),n.hij("",1===t.infoData.isKycRequest?"Yes":"No"," ")}}function en(e,o){1&e&&(n.TgZ(0,"a",39),n._UZ(1,"img",40),n.qZA())}let N=(()=>{class e{constructor(t,i){this.transactionSwapService=t,this.modalService=i,this.datailStatus=!1,this.isLoading=!1,this.listOfData=[]}ngOnInit(){this.getList()}getList(){this.isLoading=!1,this.listOfData=JSON.parse(sessionStorage.getItem("query-data"))}onDetail(t){this.infoData=t,this.datailStatus=!0}onSignture(t){this.modalService.create({nzTitle:"Simulated Signature",nzContent:x,nzWidth:"60%",nzMaskClosable:!1,nzComponentParams:{info:t,form:JSON.parse(sessionStorage.getItem("query"))},nzFooter:null})}onBack(){this.datailStatus=!1}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(Z.e),n.Y36(z.Sf))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-info"]],decls:16,vars:2,consts:[[1,"ctx-titles"],["routerLink","/sandBox/transaction/swap"],["nz-row","",1,"inner-content"],["nz-col","","nzSpan","24","nzOffset",""],[4,"ngIf"],["extraTemplate",""],["nzTitle","Available Transaction Nodes",3,"nzBordered","nzExtra"],[1,"search-result-list"],[3,"nzData","nzLoading"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"click"],["nzType","vertical"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","Sender Details",1,"descriptions-info"],["nzTitle","Business Account",3,"nzSpan"],["nzTitle","Sender DID",3,"nzSpan"],["nzTitle","Source Currency type",3,"nzSpan"],["nzTitle","Sender Account",3,"nzSpan"],["nzTitle","Amount",3,"nzSpan"],["nzTitle","Beneficiary Details",1,"descriptions-info"],["nzTitle","Beneficiary Type",3,"nzSpan"],["nzTitle","Target currency type",3,"nzSpan"],["nzTitle","Beneficiary's name",3,"nzSpan"],["nzTitle","Beneficiary Account",3,"nzSpan"],["nzTitle","Amount received",3,"nzSpan"],["nzTitle","Other information",1,"descriptions-info",3,"nzColumn"],["nzTitle","TN Name"],["nzTitle","TN Code"],["nzTitle","Target TN Name"],["nzTitle","Target TN Code"],["nzTitle","Rate"],["nzTitle","Gas"],["nzTitle","Service fee"],["nzTitle","Total Amount"],["nzTitle","IsKYC"],[1,"back"],["nz-button","","nzType","primary",3,"click"],[1,"dc-img"],["src","../../../../assets/images/API (1).png","alt",""]],template:function(t,i){1&t&&(n.TgZ(0,"div"),n.TgZ(1,"div",0),n.TgZ(2,"nz-breadcrumb"),n.TgZ(3,"nz-breadcrumb-item"),n._uU(4,"Txn Management"),n.qZA(),n.TgZ(5,"nz-breadcrumb-item"),n.TgZ(6,"a",1),n._uU(7,"Swap"),n.qZA(),n.qZA(),n.TgZ(8,"nz-breadcrumb-item"),n._uU(9,"Info"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",2),n.TgZ(11,"div",3),n.YNc(12,nn,29,5,"ng-container",4),n.YNc(13,tn,56,51,"ng-container",4),n.qZA(),n.qZA(),n.qZA(),n.YNc(14,en,2,0,"ng-template",null,5,n.W1O)),2&t&&(n.xp6(12),n.Q6J("ngIf",!i.datailStatus),n.xp6(1),n.Q6J("ngIf",i.datailStatus))},directives:[T.Dg,T.MO,g.yS,m.SK,m.t3,p.O5,q.bd,f.N8,f.Om,f.$Z,f.Uo,f._C,f.p0,p.sg,X.g,k.R7,k.uj,v.ix,S.dQ,y.w],pipes:[G.A],styles:[".inner-content[_ngcontent-%COMP%]{padding:24px;background:#fff;height:100%}.title-color[_ngcontent-%COMP%]{margin-left:5px;color:#3c5686}.search-result-list[_ngcontent-%COMP%]{padding:24px;margin-top:16px;border:1px dashed #e9e9e9;border-radius:6px}[nz-form-label][_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%]{margin-left:8px}.collapse[_ngcontent-%COMP%]{margin-left:8px;font-size:12px}.search-area[_ngcontent-%COMP%]{margin-top:10px;text-align:right}.swap-title[_ngcontent-%COMP%]{color:#3c5686;font-size:1rem;font-weight:400;margin-bottom:20px}.back[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:50px;width:100%;text-align:end}.form-label[_ngcontent-%COMP%]{text-align:left}"]}),e})();var F=s(4968),U=s(4004),O=s(8372),on=s(2955),B=s(8054),an=s(843);function rn(e,o){1&e&&(n.ynx(0),n._UZ(1,"input",32),n.BQk())}function sn(e,o){if(1&e&&n._UZ(0,"nz-option",35),2&e){const t=o.$implicit;n.Q6J("nzValue",t.did)("nzLabel",t.did)}}function cn(e,o){if(1&e&&(n.ynx(0),n.TgZ(1,"nz-select",33),n.YNc(2,sn,1,2,"nz-option",34),n.qZA(),n.BQk()),2&e){const t=n.oxw(2);n.xp6(2),n.Q6J("ngForOf",t.senderDiArr)}}function ln(e,o){if(1&e&&n._UZ(0,"nz-option",35),2&e){const t=n.oxw().$implicit;n.Q6J("nzValue",t.currencyAccount)("nzLabel",t.currencyAccount)}}function un(e,o){if(1&e&&(n.TgZ(0,"nz-option",38),n._UZ(1,"i",39),n.TgZ(2,"span",40),n._uU(3),n.qZA(),n.qZA()),2&e){const t=n.oxw().$implicit;n.Q6J("nzValue",t.currencyAccount)("nzLabel",t.currencyAccount),n.xp6(3),n.Oqu(t.currencyAccount)}}function dn(e,o){if(1&e&&(n.ynx(0),n.YNc(1,ln,1,2,"nz-option",36),n.YNc(2,un,4,3,"nz-option",37),n.BQk()),2&e){const t=o.$implicit;n.xp6(1),n.Q6J("ngIf",1!==t.isDefault),n.xp6(1),n.Q6J("ngIf",1===t.isDefault)}}function pn(e,o){if(1&e&&n._uU(0),2&e){const t=n.oxw(2);n.hij(" ",t.currency_change," ")}}function gn(e,o){1&e&&(n.TgZ(0,"nz-form-item"),n.TgZ(1,"nz-form-label",16),n._uU(2,"Business Account "),n.qZA(),n.TgZ(3,"nz-form-control"),n._UZ(4,"input",41),n.qZA(),n.qZA())}function mn(e,o){1&e&&(n.ynx(0),n._UZ(1,"input",42),n.BQk())}function fn(e,o){if(1&e&&n._UZ(0,"nz-option",35),2&e){const t=o.$implicit;n.Q6J("nzValue",t.currencyAccount)("nzLabel",t.currencyAccount)}}function hn(e,o){if(1&e&&(n.ynx(0),n.TgZ(1,"nz-select",43),n.YNc(2,fn,1,2,"nz-option",34),n.qZA(),n.BQk()),2&e){const t=n.oxw(2);n.xp6(2),n.Q6J("ngForOf",t.beneficiaryBankStatusArr)}}function zn(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"button",44),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).onSubmitForm()}),n._uU(1," Next "),n.qZA()}if(2&e){const t=n.oxw(2);n.Q6J("nzType","primary")("nzLoading",t.isLoading)("disabled",!t.validateForm.valid)}}function _n(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"a",45),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).resetForm()}),n._uU(1,"Reset"),n.qZA()}}function Tn(e,o){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",5),n.TgZ(2,"h3",6),n._uU(3," Use this screen to swap digital currencies either internal to your Business Node or externally. Prior to swapping on UDPN, users must have bound an applicable digital currency wallet with their DID. "),n.qZA(),n.TgZ(4,"div",7),n._UZ(5,"img",8),n.qZA(),n.qZA(),n.TgZ(6,"nz-card",9),n.TgZ(7,"form",10),n.TgZ(8,"div",11),n.TgZ(9,"div",12),n.TgZ(10,"div",13),n._uU(11,"Sender Details"),n.qZA(),n.TgZ(12,"nz-form-item"),n.TgZ(13,"nz-form-label",14),n._uU(14,"Business Account"),n.qZA(),n.TgZ(15,"nz-form-control"),n._UZ(16,"input",15),n.qZA(),n.qZA(),n.TgZ(17,"nz-form-item"),n.TgZ(18,"nz-form-label",16),n._uU(19,"Sender DID"),n.qZA(),n.TgZ(20,"nz-form-control"),n.YNc(21,rn,2,0,"ng-container",4),n.YNc(22,cn,3,1,"ng-container",4),n.qZA(),n.qZA(),n.TgZ(23,"nz-form-item"),n.TgZ(24,"nz-form-label",16),n._uU(25,"Source Currency Type "),n.qZA(),n.TgZ(26,"nz-form-control"),n._UZ(27,"nz-cascader",17),n.qZA(),n.qZA(),n.TgZ(28,"nz-form-item"),n.TgZ(29,"nz-form-label",16),n._uU(30,"Send Account "),n.qZA(),n.TgZ(31,"nz-form-control"),n.TgZ(32,"nz-select",18),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().sendAccountSelect=a}),n.YNc(33,dn,3,2,"ng-container",19),n.qZA(),n.qZA(),n.qZA(),n.TgZ(34,"nz-form-item"),n.TgZ(35,"nz-form-label",16),n._uU(36,"Send Amount "),n.qZA(),n.TgZ(37,"nz-form-control"),n.TgZ(38,"nz-input-group",20),n.TgZ(39,"input",21),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().values=a}),n.qZA(),n.qZA(),n.YNc(40,pn,1,1,"ng-template",null,22,n.W1O),n.qZA(),n.qZA(),n.qZA(),n.TgZ(42,"div",12),n.TgZ(43,"div",13),n._uU(44,"Beneficiary Details"),n.qZA(),n.TgZ(45,"nz-form-item"),n.TgZ(46,"nz-form-label",16),n._uU(47,"Beneficiary Type "),n.qZA(),n.TgZ(48,"nz-form-control"),n.TgZ(49,"nz-select",23),n.NdJ("ngModelChange",function(a){return n.CHM(t),n.oxw().onChaneg(a)}),n._UZ(50,"nz-option",24),n._UZ(51,"nz-option",25),n.qZA(),n.qZA(),n.qZA(),n.TgZ(52,"nz-form-item"),n.TgZ(53,"nz-form-label",14),n._uU(54,"Beneficiary Name "),n.qZA(),n.TgZ(55,"nz-form-control"),n._UZ(56,"input",26),n.qZA(),n.qZA(),n.TgZ(57,"nz-form-item"),n.TgZ(58,"nz-form-label",16),n._uU(59,"Target Currency type "),n.qZA(),n.TgZ(60,"nz-form-control"),n._UZ(61,"nz-cascader",27),n.qZA(),n.qZA(),n.YNc(62,gn,5,0,"nz-form-item",4),n.TgZ(63,"nz-form-item"),n.TgZ(64,"nz-form-label",16),n._uU(65,"Beneficiary Account "),n.qZA(),n.TgZ(66,"nz-form-control"),n.YNc(67,mn,2,0,"ng-container",4),n.YNc(68,hn,3,1,"ng-container",4),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(69,"div",28),n.TgZ(70,"div",29),n.TgZ(71,"nz-space"),n.YNc(72,zn,2,3,"button",30),n.YNc(73,_n,2,0,"a",31),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const t=n.MAs(41),i=n.oxw();n.xp6(6),n.Q6J("nzTitle",i.title)("nzBordered",!1)("nzExtra",i.extraTemplate),n.xp6(1),n.Q6J("formGroup",i.validateForm),n.xp6(1),n.Q6J("nzGutter",24),n.xp6(1),n.Q6J("nzSpan",12),n.xp6(12),n.Q6J("ngIf",!i.senderStatus),n.xp6(1),n.Q6J("ngIf",i.senderStatus),n.xp6(5),n.Q6J("nzOptions",i.nzOptions),n.xp6(5),n.Q6J("ngModel",i.sendAccountSelect),n.xp6(1),n.Q6J("ngForOf",i.sendAccountArr),n.xp6(5),n.Q6J("nzSuffix",t),n.xp6(1),n.Q6J("ngModel",i.values),n.xp6(3),n.Q6J("nzSpan",12),n.xp6(19),n.Q6J("nzOptions",i.targetNzOptions),n.xp6(1),n.Q6J("ngIf",i.showStatus),n.xp6(5),n.Q6J("ngIf",!i.beneficiaryBankStatus),n.xp6(1),n.Q6J("ngIf",i.beneficiaryBankStatus),n.xp6(2),n.Q6J("nzSpan",24)}}let J=(()=>{class e{constructor(t,i,a,r,l){this.fb=t,this.transactionSwapService=i,this.router=a,this.modalService=r,this.transactionTransferService=l,this.isLoading=!1,this.kyes="",this.values="",this.nzOptions=[],this.targetNzOptions=[],this.showStatus=!0,this.datailStatus=!1,this.listOfData=[],this.senderStatus=!1,this.senderDiArr=[],this.beneficiaryBankStatus=!1,this.beneficiaryBankStatusArr=[],this.currency_change="",this.sendAccountArr=[],this.sendAccountSelect="",this.senderDidStatus=""}ngOnDestroy(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}ngAfterViewInit(){this.fromEventAssoc(),this.fromEventCurrency(),this.fromEventSenderAccount(),this.fromEventSenderDid()}fromEventSenderDid(){this.validateForm.get("senderDid").valueChanges.subscribe(t=>{null===t||""===t?(this.senderStatus=!1,this.validateForm.get("blockChain").reset(),this.validateForm.get("senderAccount").reset(),this.sendAccountArr=[],this.currency_change=""):(this.validateForm.get("blockChain").reset(),this.validateForm.get("senderAccount").reset(),this.sendAccountArr=[],this.currency_change="",this.transactionTransferService.getCurrency({did:t}).subscribe(i=>{if(i.data.length>0){let a=[];i.data.forEach(r=>{let l=[];r.platformList.forEach((u,Sn)=>{l.push({value:u,label:u,isLeaf:!0})}),a.push({value:r.currencyType,label:r.currencyType,children:l}),this.nzOptions=a}),1==this.nzOptions.length&&this.validateForm.get("blockChain").setValue([this.nzOptions[0].value,this.nzOptions[0].children[0].value])}else this.nzOptions=[]}))}),this.validateForm.get("beneficiaryAccount").valueChanges.subscribe(t=>{null===t&&(this.beneficiaryBankStatus=!1)})}fromEventSenderAccount(){const t=document.getElementById("sender"),i=(0,F.R)(t,"input");this.subscription=i.pipe((0,U.U)(a=>a.target.value),(0,O.b)(1e3)).subscribe(a=>{let r=this.validateForm.get("targetBlockChain").value;this.transactionSwapService.getAccountVal({businessAccount:a,currencyType:r.length>0?r[0]:"",platformType:r.length>0?r[1]:""}).subscribe(l=>{if(0===l.code){let u=this.validateForm.get("beneficiaryAccount").value;l.data.length>0&&null!==u&&u.length>0?this.modalService.confirm({nzTitle:"<i>check the input value of the Beneficiary Account is it covered?</i>",nzOnOk:()=>{this.beneficiaryBankStatus=!0,this.beneficiaryBankStatusArr=l.data,l.data.length>0?this.validateForm.get("beneficiaryAccount").setValue(l.data[0].currencyAccount):this.beneficiaryBankStatus=!1}}):(this.beneficiaryBankStatus=!0,this.beneficiaryBankStatusArr=l.data,l.data.length>0?this.validateForm.get("beneficiaryAccount").setValue(l.data[0].currencyAccount):this.beneficiaryBankStatus=!1)}})})}fromEventCurrency(){this.validateForm.get("blockChain").valueChanges.subscribe(t=>{if(Array.isArray(t)&&0==t.length&&(this.validateForm.get("senderAccount").reset(),this.sendAccountArr=[],this.currency_change=""),null!==t){this.currency_change=t[0];let i=this.validateForm.get("senderDid").value;i.length>0&&this.transactionTransferService.getAccounts({did:i,currencyType:t[0],platformType:t[1]}).subscribe(a=>{this.sendAccountArr=a.data,this.sendAccountArr.forEach(r=>{1===r.isDefault?this.sendAccountSelect=r.currencyAccount:this.validateForm.get("senderAccount").reset()})})}})}fromEventAssoc(){const t=document.getElementById("assoc"),i=(0,F.R)(t,"input");this.subscription=i.pipe((0,U.U)(a=>a.target.value),(0,O.b)(1e3)).subscribe(a=>{this.transactionSwapService.getDid({businessAccount:a}).subscribe(r=>{0===r.code&&(this.validateForm.get("senderDid"),0===r.data.length&&(this.validateForm.reset(),this.validateForm.get("senderBank").setValue(a),this.validateForm.get("beneficiaryType").setValue("1"),this.sendAccountArr=[],this.currency_change=""),this.validateForm.get("blockChain").reset(),this.validateForm.get("senderAccount").reset(),this.validateForm.get("senderDid").reset(),this.sendAccountArr=[],this.currency_change="",this.senderStatus=!0,this.senderDiArr=r.data,r.data.length>0?1==r.data.length&&this.validateForm.get("senderDid").setValue(r.data[0].did):this.senderStatus=!1)})})}ngOnInit(){this.getPalt(),this.initValidateFrom()}getPalt(){this.transactionSwapService.bnFetchTypes().subscribe(t=>{let i=[];t.data.forEach(a=>{let r=[];a.platformList.forEach(l=>{r.push({value:l.platformName,label:l.platformName,isLeaf:!0})}),i.push({value:a.currencyName,label:a.currencyName,children:r}),this.targetNzOptions=i})})}resetForm(){this.validateForm.reset(),this.validateForm.get("beneficiaryType").setValue("1"),this.sendAccountArr=[],this.currency_change=""}onSubmitForm(){this.isLoading=!0,this.validateForm.valid&&this.transactionSwapService.search(this.validateForm.value).pipe((0,A.x)(()=>this.isLoading=!1)).subscribe(t=>{0===t.code&&(sessionStorage.setItem("query",JSON.stringify(this.validateForm.value)),sessionStorage.setItem("query-data",JSON.stringify(t.data)),this.router.navigate(["/sandBox/transaction/swap/info"]))})}initValidateFrom(){this.validateForm=this.fb.group({senderBank:[""],senderDid:["",[c.kI.required]],blockChain:["",[c.kI.required]],senderAccount:["",[c.kI.required]],senderAmount:["",[c.kI.required]],beneficiaryType:["1",[c.kI.required]],targetBlockChain:["",[c.kI.required]],beneficiaryName:[""],beneficiaryBank:["",[c.kI.required]],beneficiaryAccount:["",[c.kI.required]]})}onChaneg(t){1==t?(this.showStatus=!0,this.validateForm.get("beneficiaryBank").setValue("")):(this.showStatus=!1,this.validateForm.get("beneficiaryBank").setValue("none"))}onBlur(){this.transactionSwapService.getDid({businessAccount:this.validateForm.get("senderBank").value}).subscribe(t=>{0===t.code&&this.validateForm.get("senderDid").setValue(t.data.businessAccount)})}onBlur1(){this.transactionSwapService.getAccount({businessAccount:this.validateForm.get("beneficiaryBank").value}).subscribe(t=>{0===t.code&&this.validateForm.get("beneficiaryAccount").setValue(t.data.businessAccount)})}onDetail(t){this.infoData=t,this.datailStatus=!0}onBack(){this.datailStatus=!1}onSignture(t){this.modalService.create({nzTitle:"Simulated Signature",nzContent:x,nzWidth:"60%",nzMaskClosable:!1,nzComponentParams:{info:t,form:this.validateForm.value},nzFooter:null})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(c.qu),n.Y36(Z.e),n.Y36(g.F0),n.Y36(z.Sf),n.Y36(on.u))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-list"]],decls:10,vars:1,consts:[[1,"ctx-titles"],[1,"font-semibold"],["nz-row","",1,"inner-content"],["nz-col","","nzSpan","24","nzOffset",""],[4,"ngIf"],[1,"flex","items-center","justify-between","mb-2"],[1,"ml-6","dc-tool","md:text-sm","xl:text-sm","nzXXl:text-base"],[1,"mr-3"],["src","../../../../assets/images/API (1).png","alt","",1,"w-14"],[3,"nzTitle","nzBordered","nzExtra"],["nz-form","","nzLayout","horizontal",1,"ant-advanced-search-form",3,"formGroup"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[1,"swap-title"],["nzSpan","8","nzMd","10","nzXl","12","nzXXl","8",1,"form-label"],["nz-input","","id","assoc","placeholder","Business Account","formControlName","senderBank"],["nzRequired","","nzSpan","8","nzMd","10","nzXl","12","nzXXl","8",1,"form-label"],["id","block","formControlName","blockChain",3,"nzOptions"],["formControlName","senderAccount","nzPlaceHolder","Send Account",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"nzSuffix"],["nz-input","","placeholder","Send Amount","onkeyup","this.value= this.value.match(/\\d+(\\.\\d{0,20})?/) ? this.value.match(/\\d+(\\.\\d{0,20})?/)[0] : ''","formControlName","senderAmount",3,"ngModel","ngModelChange"],["suffixIconSearch",""],["formControlName","beneficiaryType",3,"ngModelChange"],["nzValue","1","nzLabel","Internal Bank Beneficiary"],["nzValue","2","nzLabel","External Beneficiary"],["nz-input","","placeholder","Beneficiary Name","formControlName","beneficiaryName"],["formControlName","targetBlockChain",3,"nzOptions"],["nz-row",""],["nz-col","",1,"search-area",3,"nzSpan"],["nz-button","",3,"nzType","nzLoading","disabled","click",4,"nzSpaceItem"],["nz-button","","nzType","link",3,"click",4,"nzSpaceItem"],["nz-input","","placeholder","Sender DID","formControlName","senderDid"],["formControlName","senderDid","nzAllowClear",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"nzValue","nzLabel",4,"ngIf"],["nzCustomContent","",3,"nzValue","nzLabel",4,"ngIf"],["nzCustomContent","",3,"nzValue","nzLabel"],["nz-icon","","nzType","check","nzTheme","outline",1,"text-blue-600"],[1,"text-blue-600"],["nz-input","","id","sender","placeholder","Business Account","formControlName","beneficiaryBank"],["nz-input","","placeholder","Beneficiary Account","formControlName","beneficiaryAccount"],["formControlName","beneficiaryAccount","nzAllowClear",""],["nz-button","",3,"nzType","nzLoading","disabled","click"],["nz-button","","nzType","link",3,"click"]],template:function(t,i){1&t&&(n.TgZ(0,"div"),n.TgZ(1,"div",0),n.TgZ(2,"nz-breadcrumb"),n.TgZ(3,"nz-breadcrumb-item"),n._uU(4,"Transaction Management"),n.qZA(),n.TgZ(5,"nz-breadcrumb-item",1),n._uU(6,"Swap"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",2),n.TgZ(8,"div",3),n.YNc(9,Tn,74,19,"ng-container",4),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(9),n.Q6J("ngIf",!i.datailStatus))},directives:[T.Dg,T.MO,m.SK,m.t3,p.O5,q.bd,c._Y,c.JL,d.Lr,c.sg,d.Nx,d.iK,d.Fd,h.Zp,c.Fj,c.JJ,c.u,B.Vq,p.sg,B.Ip,an.D4,y.w,C.Ls,h.gB,h.ke,_.NU,_.$1,v.ix,S.dQ],styles:[".inner-content[_ngcontent-%COMP%]{padding:24px;background:#fff;height:100%;margin-bottom:2rem}.title-color[_ngcontent-%COMP%]{margin-left:5px;color:#3c5686}.search-result-list[_ngcontent-%COMP%]{padding:24px;margin-top:16px;border:1px dashed #e9e9e9;border-radius:6px}[nz-form-label][_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%]{margin-left:8px}.collapse[_ngcontent-%COMP%]{margin-left:8px;font-size:12px}.search-area[_ngcontent-%COMP%]{margin-top:10px;text-align:right}.swap-title[_ngcontent-%COMP%]{color:#3c5686;font-size:1rem;font-weight:400;margin-bottom:20px}.back[_ngcontent-%COMP%]{margin-top:20px;width:100%;text-align:end}.form-label[_ngcontent-%COMP%]{text-align:left}"]}),e})(),M=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-transaction-swap"]],decls:1,vars:0,template:function(t,i){1&t&&n._UZ(0,"router-outlet")},directives:[g.lC],encapsulation:2}),e})();const An=[{path:"",component:M,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:J},{path:"info",component:N}]}];let Zn=(()=>{class e{}return e.more=[M,J,N,x],e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[g.Bz.forChild(An)],g.Bz]}),e})(),yn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[p.ez,Zn,c.u5,c.UX,D.m]]}),e})()}}]);